language: java
jdk:
- oraclejdk8
sudo: false
script: mvn test -B
addons:
  apt:
    packages:
    - sshpass
after_success:
- mvn clean install -DskipTests
- export SSHPASS=$DEPLOY_PASS
- sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST -o stricthostkeychecking=no rm -rf $DEPLOY_PATH/exchange-0.0.1-SNAPSHOT.jar
- sshpass -e scp target/exchange-0.0.1-SNAPSHOT.jar $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH
- sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST -o stricthostkeychecking=no rm -rf deploy.sh service.sh
- sshpass -e scp scripts/deploy.sh $DEPLOY_USER@$DEPLOY_HOST:/root/
- sshpass -e scp scripts/service.sh $DEPLOY_USER@$DEPLOY_HOST:/root/
- sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST -o stricthostkeychecking=no chmod +x deploy.sh service.sh
- sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST -o stricthostkeychecking=no /root/deploy.sh
env:
  global:
  - secure: jXv/pya0/xGOyfuRw8uIAlYZpL79AVD8CQHBStX8GbEQkn5CVpldQIky7G1ePx5JnMJsots6VkW/w4cU8M5Lx/kIY8eGBowtVqufmE1T8sa9UqKPaogPXLQBgXX73x0CYsFXMkKUkfXqxGM9p36GebRQslzlAMbunVT9aNKM75IxERaqule9EfzW+1tvsr/qLJxpJkNjsth2EBPHJt84n9XSB5inVj05pIi/gFyG71phGjEnQMuCA4bne9XQNfEtp1Hv+GLwN42VBepdy6TDgdZOsABcT22JkPd0oGRkseJZzwWaiZg6wA2VQni7Xuh+JxHTAGhJErspxXGbXagQFh0KG+a5wKVMB68YIgaNzv4a3wSGMYqi2ETn3ZLfUR3ykvwndEtkL1/oMYbEY2DcYxopCd0NRVCsfZtj4eFXIEGSi5RmT0lupZzz8L6dZtIutsRgcSjEXHIcB2bnJQwwi/GAq9YM4dIs+3jC7dR6LssPw0UJkhbiT7S8LndTYBI0f9pwndllZlJsKxhQlIwEY/Ka93jX9EpEaVa6bKSE6waHUdVYRerYKmeQrMF29tlHFM4cHD8ZTAQgmA6VWk2Jajes1hwzQfMJMkx+xsyJpcU6MBMgsR5AO/Aaztnx7kQIgYOXAllyCZeLrtkEzhR+Ym4jfe8ZVkvSJQTmqLHItwM=
  - secure: krC7dHSvB14CjTXPJDp2OIg0AUGBb52g6KQEGYG1RnaIaJG0syvVPS0inrp02dZMeyMucO0VPOqLAvhGDBsVuBaTTQcBo1HppOGN7q6IcumLxLIEbELuRwT0GWizEe9CFFoa45eKFZGveh2kMMxxvXiZN0mPFTaCkyyEMHlwatil2uh72tqBf3MqhQJiLjZ3W50jHAFWgVC03/FvzOqjp7WZ2vvpNbAFPKF6x1BH/Bl1ByH4sh1Y6CQ/Qa5qU2wkz7vkkNqH11Gxxw7fxOtda7eMswawjFdvCrmPGkjhxkn+KWbIfXtkv4x6KCuSTtSwzETyVNE1hnhTybO09UMCCytRoQfp6/bhBjwQ6r1NiGh/fYjM44ipjYD1SMx80pYja7Jy7FE1Q4hf8ME9dhgAZ2lSfG2nSdOeulZa70OFddUIjRNXFtW83nWij89g5LyI1rrJtI0EmPhVm3kMCnWGumX3EpftFMO4hoOfK6AyQc3sUEhrh0wAx66MdhEAjAJyZuIvwSW5QCdeGi2D66+5UwMmrouKu70iVgzpuw5u06lLSMzXMZn0zh5xnnu9cWAV8wlL5OPVBwCRB4N0hsvYpBTHxAALHQ6Tc8HnDmcWsSSePkmUzWPZM9TcJyaZkEAEQWYB7xRacr1S95zHkWxOJ9IK5s7/IMW2TUTlLMZKmbM=
  - secure: 2XyBmhZia/tc7dIqGkDGHz2dXdUsPdOyORcCYT0FfHOn+fZOD/dcavwCeqfgkQd3b1HWUhpz5qbFowaJGuU/qklQjysskuaICCreHXhW6FGD9DseAkOUYbDajLM1qyqnojxEpLVoevfYzo3Rd/FtXj9pR2xOsgFVgv9nNaa+95WT/TVd0IjbqSqln951NMzu7mJEF/OgQm1C9s5AcQNd64ZSHEnKDlkMdWUuSBdbWCMeP4L3nwKulaG77r5pkcQXiH0H142FzO97QZzMMGmz1wsJ0iTGJeTyZ91ccLiK1zMVdxIgtLmacWj98z4jcWUKrW2g2axifK6sJfvDO5mcugljYtYt9qb13PRfpEAuvNZfEB26PlsTMXyoGzTUUIQmGavVQl4iStzn8b5ipit+qIpM8utYBPiCVRjZAe3yhaio7boYcFuUtD6YA/5Y8a1y5MpRXgZO3hRrqDRKFUuWK7HKdpPuCCOPXiZGgYbQwIGGNX2YxRIloOMM7O0vDDBZRub+2k4Fk6fGxX+lpslGv62XMxf85Z+UltWxC3yABFABvRzESiFEG7pNHyOHlNYsTQa5ECdRpv0l22tT0Jfq1x5i91hrhaTub7aPaGaPHuyJB+rDicURi+vmrpNY+EVeFwXR3huU28y1kXU62R5Ku7p4eiE2wbwaXKl6PxjKhvI=
  - secure: Mkpq12x1GbG+I/Mjk+YOsDAHuQec+KRrksSQMr5s46YF+/5IsLFozruu4ZzLgY1xtxIvCnMoZoAy0xM3+g9JAZtLUd4mz4mQ4hiLG8QrmIymHY5ufr78nxODEub21iPAx9SCzrlAvAuXOKqcbXcSCQlFE1On+bXnHwNlUmbXUsmfIaO+gYkvDIhLdYdEdmPP2jbAZRg8zR7262Jg4FzWUMBQw474xlSufSeUglylvhU6Fr2L/bmewSeM3L/3O9Mrm1C7NiN7ouFBLrS4o8T/WCabeuX4do5f5FQ+XlPRGICIh4GQTK+3RYT7wB662sMVsPSMOwDd1mNjaAacx4ROaiorZyIfUYmZDj+mOPgk8qh2kxNlLpIFInKdc4ctNbGPnhQotvhOM17xwqGWLra5qRFcSxiNBypiTmkynuzCOpVODlNxgIiZaTH+CGTUEFYwKGDF+p2tZ5CjFnTKCj7P12d4dc/CkxPQ5sLi9bVxjLg1+g2vWbWMsFhKebsdtLNWFfufCZHyge4aozqGZ1Y0YdEerOwPyIIwVBgTkYnTOQx+oL25CASvHT1B9Corfh/0ccJ9+ZNeVXQd503JjBK7uIey9jlOoZn1+JZkD6Aa7ts0Gbv623NTOB0au+EYWb7SOoTdA/LGBDYTen2rAa/lhfzVxrLdUx9tO5h2ZpkhYZ8=
